function ninja_forms_check_conditional(element,action_value){var form_id=ninja_forms_get_form_id(element);var conditional=eval("ninja_forms_form_"+form_id+"_conditionals_settings");conditional=conditional.conditionals;var field_id=jQuery(element).attr("rel");for(field in conditional){var target_field=field.replace("field_","");var conditional_length=jQuery(conditional[field]["conditional"]).length;for(i=0;i<conditional_length;i++){var cr_length=jQuery(conditional[field]["conditional"][i]["cr"]).length;for(x=0;x<cr_length;x++){if(typeof conditional[field]["conditional"][i]!=="undefined"){if(conditional[field]["conditional"][i]["cr"][x]["field"]==field_id){var action_value=conditional[field]["conditional"][i]["cr"][x]["value"];ninja_forms_conditional_change(element,target_field,action_value)}}}}}}function ninja_forms_conditional_change(element,target_field,action_value){var form_id=ninja_forms_get_form_id(element);var conditional=eval("ninja_forms_form_"+form_id+"_conditionals_settings");conditional=conditional.conditionals;var cond=conditional["field_"+target_field]["conditional"];conditional_length=jQuery(cond).length;var pass_array=new Array;var value_array=new Array;var action_pass=new Object;for(i=0;i<conditional_length;i++){var connector=cond[i]["connector"];var cr_row=cond[i]["cr"];value_array[i]=cond[i]["value"];cr_length=jQuery(cr_row).length;var action=cond[i]["action"];if(connector=="and"){pass_array[i]=true}else if(connector=="or"){pass_array[i]=false}for(x=0;x<cr_length;x++){cr_field=cr_row[x]["field"];cr_operator=cr_row[x]["operator"];cr_value=cr_row[x]["value"];cr_type=jQuery("#ninja_forms_field_"+cr_field+"_type").val();cr_visible=jQuery("#ninja_forms_field_"+cr_field+"_div_wrap").data("visible");if(cr_type=="list"){if(jQuery("#ninja_forms_field_"+cr_field+"_list_type").val()=="checkbox"){if(jQuery(".ninja_forms_field_"+cr_field+"[value='"+cr_value+"']").prop("checked")){var field_value=cr_value}else{var field_value=""}jQuery(".ninja_forms_field_"+cr_field+"[value='"+cr_value+"']").each(function(){if(!cr_visible){}})}else if(jQuery("#ninja_forms_field_"+cr_field+"_list_type").val()=="radio"){var field_value=jQuery("input[name='ninja_forms_field_"+cr_field+"']:checked").val();jQuery("input[name='ninja_forms_field_"+cr_field+"']").each(function(){if(!cr_visible){}})}else{field_value=jQuery("#ninja_forms_field_"+cr_field).val()}}else if(cr_type=="checkbox"){if(jQuery("#ninja_forms_field_"+cr_field).prop("checked")){var field_value="checked"}else{var field_value="unchecked"}}else{field_value=jQuery("#ninja_forms_field_"+cr_field).val()}if(is_numeric(field_value)){field_value=parseInt(field_value)}if(is_numeric(cr_value)){cr_value=parseInt(cr_value)}var tmp=ninja_forms_conditional_compare(field_value,cr_value,cr_operator);if(cr_visible!=1){tmp=false}if(connector=="and"){if(!tmp){pass_array[i]=false}}else if(connector=="or"){if(tmp){pass_array[i]=true}}}if(typeof action_pass[action]==="undefined"){action_pass[action]=new Object}if(typeof action_pass[action][cond[i]["value"]]==="undefined"||action_pass[action][cond[i]["value"]]===false){if(pass_array[i]){action_pass[action][cond[i]["value"]]=true}else{action_pass[action][cond[i]["value"]]=false}}}for(i=0;i<conditional_length;i++){var action=cond[i]["action"];value=value_array[i];pass=action_pass[action][value];var input_type=jQuery("#ninja_forms_field_"+target_field+"_type").val();var list_type="";var list=false;if(input_type=="list"){input_type=jQuery("#ninja_forms_field_"+target_field+"_list_type").val();list_type=input_type;list=true}if(action=="show"){if(pass){var was_visible=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").is(":visible");jQuery("#ninja_forms_field_"+target_field+"_div_wrap").show();jQuery("#ninja_forms_field_"+target_field+"_div_wrap").data("visible",true);if(list){if(input_type=="checkbox"||input_type=="radio"){var target_element=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field:visible:first")}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}if(!was_visible){if(jQuery(target_element).hasClass("ninja-forms-field-calc-listen")){jQuery(target_element).data("oldValue","");if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).removeClass("ninja-forms-field-calc-no-new-op")})}else{jQuery(target_element).removeClass("ninja-forms-field-calc-no-new-op")}}if(jQuery(target_element).attr("type")!="file"){if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).change();jQuery(this).removeClass("ninja-forms-field-calc-no-new-op")})}else{jQuery(target_element).change();jQuery(target_element).removeClass("ninja-forms-field-calc-no-new-op")}}}}else{if(list){if(input_type=="checkbox"||input_type=="radio"){var target_element=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field:visible:first")}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}var was_visible=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").is(":visible");jQuery("#ninja_forms_field_"+target_field+"_div_wrap").hide();jQuery("#ninja_forms_field_"+target_field+"_div_wrap").data("visible",false);if(was_visible){if(jQuery(target_element).hasClass("ninja-forms-field-calc-listen")){jQuery(target_element).data("oldValue",jQuery(target_element).val());if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).addClass("ninja-forms-field-calc-no-new-op")})}else{jQuery(target_element).addClass("ninja-forms-field-calc-no-new-op")}}if(jQuery(target_element).attr("type")!="file"){if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).change();jQuery(this).addClass("ninja-forms-field-calc-no-old-op")})}else{jQuery(target_element).change();jQuery(target_element).addClass("ninja-forms-field-calc-no-old-op")}}}}}else if(action=="hide"){if(pass){if(list){if(input_type=="checkbox"||input_type=="radio"){var target_element=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field:visible:first")}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}var was_visible=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").is(":visible");jQuery("#ninja_forms_field_"+target_field+"_div_wrap").hide();jQuery("#ninja_forms_field_"+target_field+"_div_wrap").data("visible",false);if(was_visible){if(jQuery(target_element).hasClass("ninja-forms-field-calc-listen")){jQuery(target_element).data("oldValue",jQuery(target_element).val());if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).addClass("ninja-forms-field-calc-no-new-op")})}else{jQuery(target_element).addClass("ninja-forms-field-calc-no-new-op")}}if(jQuery(target_element).attr("type")!="file"){if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).change()})}else{jQuery(target_element).change()}}}}else{var was_visible=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").is(":visible");jQuery("#ninja_forms_field_"+target_field+"_div_wrap").show();jQuery("#ninja_forms_field_"+target_field+"_div_wrap").data("visible",true);if(list){if(input_type=="checkbox"||input_type=="radio"){var target_element=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field:visible:first")}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}if(!was_visible){if(jQuery(target_element).hasClass("ninja-forms-field-calc-listen")){jQuery(target_element).data("oldValue","");if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).removeClass("ninja-forms-field-calc-no-new-op")})}else{jQuery(target_element).removeClass("ninja-forms-field-calc-no-new-op")}}if(jQuery(target_element).attr("type")!="file"){if(list&&(input_type=="checkbox"||input_type=="radio")){jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field").each(function(){jQuery(this).change();jQuery(this).removeClass("ninja-forms-field-calc-no-new-op")})}else{jQuery(target_element).change();jQuery(target_element).removeClass("ninja-forms-field-calc-no-new-op")}}}}}else if(action=="change_value"){if(input_type=="checkbox"){if(pass){if(value=="checked"){jQuery("#ninja_forms_field_"+target_field).attr("checked",true)}else if(value=="unchecked"){jQuery("#ninja_forms_field_"+target_field).attr("checked",false)}}}else if(input_type=="radio"){if(pass){jQuery("[name='ninja_forms_field_"+target_field+"'][value='"+value+"']").attr("checked",true)}else{jQuery("[name='ninja_forms_field_"+target_field+"'][value='"+value+"']").attr("checked",false)}}else{if(pass){jQuery("#ninja_forms_field_"+target_field).val(value)}}if(pass){if(list){if(input_type=="checkbox"||input_type=="radio"){var target_element=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field:visible:first")}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}}else if(action=="remove_value"){if(input_type=="dropdown"){if(pass){var selected_var=jQuery("#ninja_forms_field_"+target_field).val();if(selected_var==value){var next_val=jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").next().val();jQuery("#ninja_forms_field_"+target_field).val(next_val)}jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").hide();jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").attr("disabled",true)}else{jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").show();jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").attr("disabled",false)}}else if(input_type=="multi"){if(pass){var selected_var=jQuery("#ninja_forms_field_"+target_field).val();if(!!selected_var){var index=selected_var.indexOf(value);if(index!=-1){selected_var.splice(index,1);jQuery("#ninja_forms_field_"+target_field).val(selected_var)}}var opt_index=jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").prop("index");var clone=jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").clone();jQuery(clone).attr("title",opt_index);jQuery("#ninja_forms_field_"+target_field+"_clone").append(clone);jQuery("#ninja_forms_field_"+target_field+" option[value='"+value+"']").remove()}else{var clone=jQuery("#ninja_forms_field_"+target_field+"_clone option[value='"+value+"']");var opt_index=jQuery(clone).attr("title");opt_index++;var selected_var=jQuery("#ninja_forms_field_"+target_field).val();jQuery("#ninja_forms_field_"+target_field+" option:nth-child("+opt_index+")").before(clone);jQuery("#ninja_forms_field_"+target_field).val(selected_var)}}else if(input_type=="checkbox"||input_type=="radio"){if(pass){jQuery("input[name^=ninja_forms_field_"+target_field+"][value='"+value+"']").attr("checked",false);jQuery("input[name^=ninja_forms_field_"+target_field+"][value='"+value+"']").parent().hide()}else{jQuery("input[name^=ninja_forms_field_"+target_field+"][value='"+value+"']").parent().show()}}if(list){if(input_type=="checkbox"||input_type=="radio"){var target_element=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field:visible:first")}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else if(action=="add_value"){if(typeof value!=="undefined"){if(typeof value.value==="undefined"||value.value=="_ninja_forms_no_value"){value.value=value.label}if(input_type=="dropdown"||input_type=="multi"){if(pass){var current_count=jQuery("#ninja_forms_field_"+target_field+" option[value='"+value.value+"']").length;if(current_count==0){jQuery("#ninja_forms_field_"+target_field).append("<option value='"+value.value+"'>"+value.label+"</option>")}}else{jQuery("#ninja_forms_field_"+target_field+" option[value='"+value.value+"']").remove()}}else if(input_type=="checkbox"||input_type=="radio"){if(pass){var current_count=jQuery("input[name^=ninja_forms_field_"+target_field+"][value='"+value.value+"']").length;if(current_count==0){var clone=jQuery("#ninja_forms_field_"+target_field+"_template").clone();var count=jQuery(".ninja-forms-field-"+target_field+"-options").length;var label_id=jQuery(clone).prop("id").replace("template",count);jQuery(clone).prop("id",label_id);var checkbox_id=jQuery(clone).find(":checkbox").prop("id")+count;if(input_type=="checkbox"){var checkbox_name="ninja_forms_field_"+target_field+"[]"}else{var checkbox_name="ninja_forms_field_"+target_field}jQuery(clone).find(":"+input_type).prop("id",checkbox_id);jQuery(clone).find(":"+input_type).attr("name",checkbox_name);jQuery(clone).find(":"+input_type).val(value.value);jQuery(clone).find(":"+input_type).after(value.label);jQuery(clone).attr("style","");jQuery("#ninja_forms_field_"+target_field+"_options_span").find("ul").append(clone)}}else{jQuery("input[name^=ninja_forms_field_"+target_field+"][value='"+value.value+"']").parent().remove()}}}if(list){if(input_type=="checkbox"||input_type=="radio"){var target_element=jQuery("#ninja_forms_field_"+target_field+"_div_wrap").find(".ninja-forms-field:visible:first")}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{var target_element=jQuery("#ninja_forms_field_"+target_field)}}else{pass=pass_array[i];result=window[action](pass,target_field,element)}}}function ninja_forms_conditional_compare(e,t,n){switch(n){case"==":return e==t;case"!=":return e!=t;case"<":return e<t;case">":return e>t}}function is_numeric(e){return(typeof e==="number"||typeof e==="string")&&e!==""&&!isNaN(e)}Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);this.length=e<0?this.length+e:e;return this.push.apply(this,n)};jQuery(document).ready(function(e){e(document).on("change",".ninja-forms-field-conditional-listen",function(){ninja_forms_check_conditional(this,true)});e(document).on("keyup",".ninja-forms-field-conditional-listen",function(){ninja_forms_check_conditional(this,true)})})